fx_version 'cerulean'
game 'gta5'

author 'Djonluc'
description 'DjonLuc Evidence Destruction Event - Multi-Framework Convoy Escort System'
version '1.0.0'

-- Script loading order
shared_scripts {
    'config.lua',
    'shared/*.lua'
}

client_scripts {
    'client/*.lua'
}

server_scripts {
    'server/*.lua'
}

-- Framework compatibility - Auto-detected
-- No hard dependencies required

-- Export functions for other resources
exports {
    'IsEventActive',
    'GetEventData',
    'StartEvidenceEvent',
    'EndEvidenceEvent',
    'GetConvoyPosition',
    'GetEscortPedsAlive',
    'GetCustomRoutes',
    'RegisterCustomRoute',
    'UnregisterCustomRoute',
    'GetPlayerJob',
    'InitializeEscortAI',
    'InitializeEnhancedEscortAI',
    'SetConvoyStartPoint',
    'SetConvoyEndPoint',
    'GetCurrentDynamicRoute',
    'ResetConvoyRoute'
}

-- Server exports
server_exports {
    'IsEventActive',
    'GetEventData',
    'StartEvidenceEvent',
    'EndEvidenceEvent',
    'GetConvoyPosition',
    'GetEscortPedsAlive',
    'GetCustomRoutes',
    'RegisterCustomRoute',
    'UnregisterCustomRoute',
    'GetPlayerJob',
    'SetConvoyStartPoint',
    'SetConvoyEndPoint',
    'GetCurrentDynamicRoute',
    'ResetConvoyRoute'
}

-- ========================================
-- FRAMEWORK SUPPORT & COMPATIBILITY
-- ========================================

-- Supported Frameworks (Auto-detected):
-- â€¢ QBCore (Latest Version) - Primary Framework
-- â€¢ QBox (QBCore-based Framework) - Full Compatibility
-- â€¢ ESX (ESX Legacy & Older Versions) - Fallback Support
-- â€¢ vRP (Legacy Version) - Fallback Support

-- ========================================
-- DEPENDENCIES BREAKDOWN
-- ========================================

-- ðŸš¨ MANDATORY REQUIREMENTS:
-- â€¢ FiveM Server with Lua support (Lua 5.4 recommended)
-- â€¢ Framework: QBCore (Primary) - QBox, ESX, vRP (Fallback)
-- â€¢ Job System: DOJ, LEO, and police jobs must exist in QBCore
-- â€¢ Vehicle/Ped Models: All convoy vehicles and peds must be available
-- â€¢ QBCore Jobs: Ensure DOJ, LEO, and police jobs are configured

-- ðŸ”§ OPTIONAL DEPENDENCIES (Auto-detected):
-- â€¢ qb-inventory - QBCore inventory system (Primary)
-- â€¢ ox_inventory - Modern inventory system (QBCore compatible)
-- â€¢ qb-target - QBCore target system (Primary)
-- â€¢ ox_target - Modern target system (QBCore compatible)
-- â€¢ qb-menu - QBCore menu system (Primary)
-- â€¢ ox_lib - Modern utility library (QBCore compatible)
-- â€¢ ox_weapons - Weapon management system (QBCore compatible)

-- ========================================
-- SERVER SETUP NOTES
-- ========================================

-- â€¢ Jobs must be recognized by AI for guard behavior (configure in config.lua)
-- â€¢ Inventory independence: Can use "dummy" loot crates if no inventory system
-- â€¢ Framework flexibility: Auto-detects and adapts to your setup
-- â€¢ AI behavior: Enhanced AI system included with realistic escort response
-- â€¢ Dynamic routes: Can set custom start/end points via console commands
-- â€¢ Auto-detection: No manual configuration required for dependencies

-- ========================================
-- CONSOLE COMMANDS
-- ========================================

-- Event Management:
-- â€¢ /startevidence - Start evidence destruction event
-- â€¢ /endevent - End current event (DOJ/LEO only)

-- Convoy Route Management:
-- â€¢ /setconvoystart <x> <y> <z> - Set convoy start point
-- â€¢ /setconvoyend <x> <y> <z> - Set convoy end point
-- â€¢ /setconvoyroute <start_x> <start_y> <start_z> <end_x> <end_y> <end_z> - Set complete route
-- â€¢ /resetconvoyroute - Reset to default route
-- â€¢ /convoyroute - Show current route settings

-- System Status:
-- â€¢ /evidence_status - Full server status report
-- â€¢ /evidence_redetect - Manually re-detect framework
-- â€¢ /test_oxlib - Test ox_lib functionality and compatibility

-- ========================================
-- INTEGRATION & USAGE
-- ========================================

-- The script automatically detects available resources and adapts accordingly
-- No manual dependency configuration required - just ensure your framework is running
-- Use the provided exports to integrate with other resources
-- All framework-specific functions are handled automatically

-- ========================================
-- QBCORE SETUP GUIDE
-- ========================================

-- For QBCore servers, ensure these jobs exist in qb-core/shared/jobs.lua:
-- 
-- ['doj'] = {
--     label = 'Department of Justice',
--     defaultGrade = 0,
--     grades = {
--         ['0'] = {
--             name = 'Agent',
--             payment = 50
--         }
--     }
-- },
-- 
-- ['leo'] = {
--     label = 'Law Enforcement',
--     defaultGrade = 0,
--     grades = {
--         ['0'] = {
--             name = 'Officer',
--             payment = 50
--         }
--     }
-- },
-- 
-- ['police'] = {
--             label = 'Police',
--             defaultGrade = 0,
--             grades = {
--                 ['0'] = {
--                     name = 'Recruit',
--                     payment = 50
--                 }
--             }
--         }
